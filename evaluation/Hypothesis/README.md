# Point cloud alignment reconstruction and evaluation
SPVoteNet can use the A function, or it can be changed to the B or C function, in recall_precision.py
File structure /registration_evaluate/your_project_eval/
1. generate_pointcloud.py 
  Example: Using the depth image of /registration_evaluate/heads_eval/heads/depth/ and
  /registration_evaluate/heads_eval/heads/rgb/ to generate ply files to be saved in
  /registration_evaluate/heads_eval/heads/ply/ (ply generation requires camera intrinsic parameters)
2.generate_eval.py
    Example: rename pose, ply, rgb (refer to step 1.) and save to /registration_evaluate/heads_eval/heads/heads_evaluation
  pose_eval, ply_eval, color_eval (note that the shape of the depth map and the shape of the rgb map need to be consistent)
3. getGtinfoLog.m(located in registration_evaluate/3dmatch-toolbox-master/3dmatch-toolbox-master/evaluation/geometric-registration/ getGtInfoLog.m)
  In the /heads_evaluation/heads_fragments folder, create three new subfolders as
  heads, heads-evaluation, and heads-info, and move the ply file and .info.txt file generated in step 2 to
  heads, heads-info, and use getGtinfoLog.m to generate gt.log and gt.info files and store them in heads-evaluation.
4. generate_rgb_pairs.py (note that the image is jpg or png) to generate the pairs that need to be aligned by superglue.
5. Use superglue to find 20 aligned pairs of points according to the pairs and save the 3D coordinates of the pairs, /registration_evaluate/heads_eval/head_output/text3d/
6. recall_precision.py
  Use your own algorithm to generate your own ~.log, the ~.log file is saved in the heads-evaluation in step 3, note that the rt matrix in the gt.log file is the matrix from the id at the back to the id at the front.
  So we also need to generate the same matrix, you need to replace the path of the 3D coordinates generated by superglue and the path of gt.log and your own log file path, your own log file path in line 13
7.evaluate.m
  Calculate recall and precision based on gt.log, gt.info and your own .log generated in steps 3 and 6
8.dataset
 The demo data are provided by [BaiDuPan](https://pan.baidu.com/s/1M97myAn5iYDa1V49FJU2xA)  Extraction Code: 1234
 download heads_eval from BaiDuPan and put in evaluation/Hypothesis/registration_evaluate/ directory.
 living_room_eval After downloaded from BaiDuPan, refer to the heads_eval directory structure to construct your own folder, we provide rotateQuaternion.py to generate a 4*4 pose matrix and save it separately to txt (we provide the 4 element pose file livingRoom2_882.gt. freiburg), named in the same way as the depth directory, and then placed in the evaluation/Hypothesis/registration_evaluate/ directory


